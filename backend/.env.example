# BloombergGPT Backend Environment Variables

# ═══════════════════════════════════════════════════════════════════════
# Database Configuration
# ═══════════════════════════════════════════════════════════════════════
DATABASE_URL=postgresql://semantic:semantic@localhost:5433/semantic_markets
DB_POOL_MIN_SIZE=1
DB_POOL_MAX_SIZE=10
DB_POOL_TIMEOUT=5.0

# ═══════════════════════════════════════════════════════════════════════
# Vector Store Configuration
# ═══════════════════════════════════════════════════════════════════════
# Weaviate (recommended for production - fast vector search)
WEAVIATE_URL=https://your-cluster.c0.us-east-1.aws.weaviate.cloud
WEAVIATE_API_KEY=your-api-key-here
WEAVIATE_COLLECTION=forecaster

# If Weaviate is not configured, falls back to PostgreSQL pgvector
# Note: pgvector is slower for large datasets (>100K events)

# ═══════════════════════════════════════════════════════════════════════
# API Keys
# ═══════════════════════════════════════════════════════════════════════

# OpenAI (required for embeddings)
OPENAI_API_KEY=sk-...
OPENAI_EMBEDDING_MODEL=text-embedding-3-large
EMBEDDING_DIM=3072
OPENAI_EMBED_TIMEOUT=15.0
MAX_EMBED_RETRIES=3

# Anthropic Claude (optional - for event analysis)
ANTHROPIC_API_KEY=sk-ant-...

# Google Gemini (optional - for fast classification)
GEMINI_API_KEY=...
# or
GOOGLE_API_KEY=...

# ═══════════════════════════════════════════════════════════════════════
# Performance & Feature Flags
# ═══════════════════════════════════════════════════════════════════════

# Disable automatic ingestion on startup (useful during development)
# Set to "true" to skip RSS/crypto ingestion when the backend starts
# This dramatically speeds up development server restarts
# Default: false (ingestion runs on startup)
DISABLE_STARTUP_INGESTION=true

# Disable NFL Elo ingestion (if you don't need sports data)
DISABLE_NFL_ELO_INGEST=false

# ═══════════════════════════════════════════════════════════════════════
# Scheduler Intervals (in hours)
# ═══════════════════════════════════════════════════════════════════════
RSS_INGEST_INTERVAL_HOURS=1
CRYPTO_BACKFILL_INTERVAL_HOURS=24
EQUITY_BACKFILL_INTERVAL_HOURS=24
NFL_ELO_BACKFILL_INTERVAL_HOURS=24
BAKER_PROJECTIONS_INTERVAL_HOURS=1

# ═══════════════════════════════════════════════════════════════════════
# Ingestion Configuration
# ═══════════════════════════════════════════════════════════════════════
MAX_FETCH_RETRIES=3
FETCH_TIMEOUT=10
MAX_DOWNLOAD_RETRIES=3

# ═══════════════════════════════════════════════════════════════════════
# Symbol Configuration (optional - defaults to BTC-USD, ETH-USD, XMR-USD)
# ═══════════════════════════════════════════════════════════════════════
# Format: SYMBOL:YAHOO_TICKER,SYMBOL:YAHOO_TICKER,...
# CRYPTO_SYMBOLS=BTC-USD:BTC-USD,ETH-USD:ETH-USD,XMR-USD:XMR-USD,SOL-USD:SOL-USD
# EQUITY_SYMBOLS=NVDA:NVDA,AAPL:AAPL,TSLA:TSLA

# ═══════════════════════════════════════════════════════════════════════
# Forecasting Parameters
# ═══════════════════════════════════════════════════════════════════════
FORECAST_DIRECTION_THRESHOLD=0.0005
FORECAST_CONFIDENCE_SCALE=2.0
EVENT_FORECAST_K_NEIGHBORS=25
EVENT_FORECAST_ALPHA=0.5
EVENT_FORECAST_LOOKBACK_DAYS=365
EVENT_FORECAST_PRICE_WINDOW=60
DEFAULT_HORIZON_MINUTES=1440
DEFAULT_LOOKBACK_DAYS=60

# ═══════════════════════════════════════════════════════════════════════
# API Configuration
# ═══════════════════════════════════════════════════════════════════════
API_MAX_EVENTS_LIMIT=200
API_MAX_NEIGHBORS_LIMIT=50
API_MAX_PROJECTIONS_LIMIT=50
MIN_HORIZON_MINUTES=1
MAX_HORIZON_MINUTES=43200
MIN_LOOKBACK_DAYS=1
MAX_LOOKBACK_DAYS=730

# ═══════════════════════════════════════════════════════════════════════
# NFL & Sports Data Configuration
# ═══════════════════════════════════════════════════════════════════════

# SportsData.io API Key (for structured NFL statistics)
# Get your key at: https://sportsdata.io/members/subscriptions
# SPORTSDATA_API_KEY=your-api-key-here

# Baker Projections API Key (for NFL win probabilities)
# BAKER_API_KEY=your-api-key-here

# ESPN API Configuration
ESPN_API_BASE_URL=https://site.api.espn.com/apis/site/v2/sports/football/nfl
ESPN_API_TIMEOUT=10
ESPN_API_MAX_RETRIES=3
ESPN_USE_OPTIMIZED_FETCH=true

# NFL Backfill Configuration
NFL_BACKFILL_SEASONS=3
NFL_DEFAULT_HORIZON_MINUTES=1440

# NFL Game Outcome Configuration
NFL_BASELINE_SCORE=100.0
NFL_POINT_DIFF_SCALE=10.0

# NFL Event-to-Game Mapping
NFL_MAX_DAYS_AHEAD=30
NFL_MAX_DAYS_BEFORE_GAME=7
NFL_MIN_DAYS_BEFORE_GAME=0

# NFL Forecasting Thresholds
NFL_CONFIDENCE_SAMPLE_THRESHOLD=20.0
NFL_CONFIDENCE_SNR_THRESHOLD=2.0

# NFL Team Display Names (optional - override defaults)
# Format: NFL_TEAM_<ABBR>_NAME=<Full Team Name>
# NFL_TEAM_KC_NAME=Kansas City Chiefs
# NFL_TEAM_DAL_NAME=Dallas Cowboys
# NFL_TEAM_SF_NAME=San Francisco 49ers
# NFL_TEAM_PHI_NAME=Philadelphia Eagles
# NFL_TEAM_BUF_NAME=Buffalo Bills
# NFL_TEAM_DET_NAME=Detroit Lions

# Baker Team Mapping (optional)
# Format: ABBR:TARGET_ID,ABBR:TARGET_ID,...
# BAKER_TEAM_MAP=KC:NFL:KC_CHIEFS,DAL:NFL:DAL_COWBOYS,SF:NFL:SF_49ERS

# ═══════════════════════════════════════════════════════════════════════
# Additional Feature Flags
# ═══════════════════════════════════════════════════════════════════════

# Disable Baker projections ingestion (if you don't have API key)
DISABLE_BAKER_PROJECTIONS=false

# ═══════════════════════════════════════════════════════════════════════
# Security Notes
# ═══════════════════════════════════════════════════════════════════════
#
# IMPORTANT: Never commit the actual .env file to Git!
#
# Security Checklist:
# 1. Copy this file to .env and fill in your actual API keys
# 2. Verify .env is in .gitignore
# 3. Rotate all API keys if they were ever committed to Git
# 4. Set up billing alerts on all API services
# 5. Enable MFA on all accounts (OpenAI, Anthropic, etc.)
# 6. Consider using git-secrets pre-commit hook
#
# API Key Management:
# - OpenAI: https://platform.openai.com/api-keys
# - Anthropic: https://console.anthropic.com/settings/keys
# - Gemini: https://console.cloud.google.com/apis/credentials
# - Weaviate: https://console.weaviate.cloud/
# - SportsData.io: https://sportsdata.io/members/subscriptions
#
